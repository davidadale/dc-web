#{extends 'admin.html'/}
#{set app:'order-management'/}
#{set header:'orders'/}
<div class="row" ng-controller="OrderManagerController">
    <a href="@{Admin.deleteOrder(order.id)}" class="btn btn-default">Delete</a>
    <div class="col-md-7">

        ${order.type} <br>
        ${order.created}<br>
        ${order.plan}

        <table class="table" ng-table="tableParams" >
            <tr ng-repeat="item in items">
                <td data-title="Column1 " sortable="foo">{{item.foo}}</td>
                <td data-title="Column2 " sortable="foo">{{item.foo}}</td>
            </tr>
        </table>

    </div>

    <div class="col-md-5">
        <form action="/admin/order/${order.id}/index" class="dropzone" id="dz" method="POST">
            <div class="text-center" style="margin: 50% auto;">
            <h1>Drop files <small>to upload</small></h1>
            (or click)
            </div>
        </form>
    </div>
</div>
#{set 'moreStyles'}
    <link href="@{'public/stylesheets/ng-table.css'}" rel="stylesheet">
    <link href="@{'public/stylesheets/dropzone.css'}" rel="stylesheet">
#{/set}
#{set 'moreScripts'}
    <script src="@{'public/javascripts/ng-table.js'}"></script>
    <script src="@{'public/javascripts/dropzone.js'}"></script>
    <script>

        Dropzone.options.dz = {
            addRemoveLinks:true,
            init: function() {
                this.on("success", function(file, json ) {
                    // Handle the responseText here. For example, add the text to the preview element:
                    //file.previewTemplate.appendChild(document.createTextNode(responseText));
                    if( json.success ){
                        alert( json.data )
                    }else{
                        alert( json.msg )
                    }

                });
            }
        };
    </script>
#{/set}
